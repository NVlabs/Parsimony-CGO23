<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<title>Simd Library Documentation.</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
</head>
<style>
  code {font-size:85%; color:black; background-color:#F8F8FF; border: 1px solid #E0E0F0; padding: 1px 1px; margin: 1px 2px 1px 2px;}
</style>
<body><table align="center" cellpadding="12" cellspacing="0" width="1024"><tr><td>
<center>
<img width="200" height="100" src="../logo.png">
<h1>Simd Library Documentation.</h1>
<a href="../index.html">Home</a> |
<a href="../2022.html">Release Notes</a> | 
<a href="../download.html">Download</a> | 
<a href="index.html">Documentation</a> | 
<a href="http://github.com/ermig1979/Simd/issues">Issues</a> | 
<a href="http://github.com/ermig1979/Simd" target="_top">GitHub</a> 
</center> </td></tr> <tr><td>
<div id="top"> <div class="content" id="content"> <div class="container"> <div class="row"> 
 <div class="col-sm-12 panel " style="padding-bottom: 15px;"> <div style="margin-bottom: 15px;">
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Simd Library Overview </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="s0"></a>
Introduction</h1>
<p >The <b>Simd Library</b> is a free open source image processing library and machine learning, designed for C and C++ programmers. It provides many useful high performance algorithms for image processing and machine learning such as: pixel format conversion, image scaling and filtration, extraction of statistic information from images, motion detection, object detection (HAAR and LBP classifier cascades) and classification, neural network.</p>
<p >The algorithms are optimized with using of different SIMD CPU extensions. In particular the library supports following CPU extensions: SSE, AVX and AVX-512 for x86/x64, VMX(Altivec) and VSX(Power7) for PowerPC, NEON for ARM.</p>
<p >The Simd Library has C API and also contains useful C++ classes and functions to facilitate access to C API. The library supports dynamic and static linking, 32-bit and 64-bit Windows and Linux, MSVS, G++ and Clang compilers, MSVS project and CMake build systems.</p>
<h1><a class="anchor" id="s1"></a>
Library folder's structure</h1>
<p >The Simd Library has next folder's structure:</p><ul>
<li><code>simd/src/Simd/</code> - contains source codes of the library.</li>
<li><code>simd/src/Test/</code> - contains test framework of the library.</li>
<li><code>simd/src/Use/</code> - contains the use examples of the library.</li>
<li><code>simd/prj/vs2015/</code> - contains project files of Microsoft Visual Studio 2015.</li>
<li><code>simd/prj/vs2017/</code> - contains project files of Microsoft Visual Studio 2017.</li>
<li><code>simd/prj/vs2019/</code> - contains project files of Microsoft Visual Studio 2019.</li>
<li><code>simd/prj/cmd/</code> - contains additional scripts needed for building of the library in Windows.</li>
<li><code>simd/prj/cmake/</code> - contains files of CMake build systems.</li>
<li><code>simd/prj/sh/</code> - contains additional scripts needed for building of the library in Linux.</li>
<li><code>simd/prj/txt/</code> - contains text files needed for building of the library.</li>
<li><code>simd/data/cascade/</code> - contains OpenCV cascades (HAAR and LBP).</li>
<li><code>simd/data/image/</code> - contains image samples.</li>
<li><code>simd/data/network/</code> - contains examples of trained networks.</li>
<li><code>simd/docs/</code> - contains documentation of the library.</li>
</ul>
<h1><a class="anchor" id="s2"></a>
The library building for Windows</h1>
<p >To build the library and test application for Windows 32/64 you can use Microsoft Visual Studio 2019 (or 2015/2017). These project files are in the directory: <br  />
<code>simd/prj/vs2019/.</code> <br  />
 By default the library is built as a DLL (Dynamic Linked Library). You also may build it as a static library. To do this you must change appropriate property (Configuration Type) of <b>Simd</b> project and also define macro <code>SIMD_STATIC</code> in file: <br  />
<code>simd/src/Simd/SimdConfig.h.</code></p>
<p >Also in order to build the library you can use CMake and MinGW: </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..\prj\cmake -DSIMD_TOOLCHAIN=<span class="stringliteral">&quot;your_toolchain\bin\g++&quot;</span> -DSIMD_TARGET=<span class="stringliteral">&quot;x86_64&quot;</span> -DCMAKE_BUILD_TYPE=<span class="stringliteral">&quot;Release&quot;</span> -G <span class="stringliteral">&quot;MinGW Makefiles&quot;</span></div>
<div class="line">mingw32-make</div>
</div><!-- fragment --><h1><a class="anchor" id="s3"></a>
The library building for Linux</h1>
<p >To build the library and test application for Linux 32/64 you need to use CMake build systems. Files of CMake build systems are placed in the directory: <code>simd/prj/cmake/.</code> The library can be built for x86/x64, PowerPC(64) and ARM(32/64) platforms with using of G++ or Clang compilers. With using of native compiler (g++) for current platform it is simple: </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ../prj/cmake -DSIMD_TOOLCHAIN=<span class="stringliteral">&quot;&quot;</span> -DSIMD_TARGET=<span class="stringliteral">&quot;&quot;</span></div>
<div class="line">make</div>
</div><!-- fragment --><p> To build the library for PowePC(64) and ARM(32/64) platforms you can also use toolchain for cross compilation. There is an example of using for PowerPC (64 bit): </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ../prj/cmake -DSIMD_TOOLCHAIN=<span class="stringliteral">&quot;/your_toolchain/usr/bin/powerpc-linux-gnu-g++&quot;</span> -DSIMD_TARGET=<span class="stringliteral">&quot;ppc64&quot;</span> -DCMAKE_BUILD_TYPE=<span class="stringliteral">&quot;Release&quot;</span></div>
<div class="line">make</div>
</div><!-- fragment --><p> For ARM (32 bit): </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ../prj/cmake -DSIMD_TOOLCHAIN=<span class="stringliteral">&quot;/your_toolchain/usr/bin/arm-linux-gnueabihf-g++&quot;</span> -DSIMD_TARGET=<span class="stringliteral">&quot;arm&quot;</span> -DCMAKE_BUILD_TYPE=<span class="stringliteral">&quot;Release&quot;</span></div>
<div class="line">make</div>
</div><!-- fragment --><p> And for ARM (64 bit): </p><div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ../prj/cmake -DSIMD_TOOLCHAIN=<span class="stringliteral">&quot;/your_toolchain/usr/bin/aarch64-linux-gnu-g++&quot;</span> -DSIMD_TARGET=<span class="stringliteral">&quot;aarch64&quot;</span> -DCMAKE_BUILD_TYPE=<span class="stringliteral">&quot;Release&quot;</span></div>
<div class="line">make</div>
</div><!-- fragment --><p> As result the library and the test application will be built in the current directory.</p>
<p >There are addition build parameters:</p>
<ul>
<li><code>SIMD_AVX512</code> - Enable of AVX-512 (AVX-512F, AVX-512CD, AVX-512VL, AVX-512DQ, AVX-512BW) CPU extensions. It is switched on by default.</li>
<li><code>SIMD_AVX512VNNI</code> - Enable of AVX-512-VNNI CPU extensions. It is switched on by default.</li>
<li><code>SIMD_TEST</code> - Build test framework. It is switched on by default.</li>
<li><code>SIMD_INFO</code> - Print build information. It is switched on by default.</li>
<li><code>SIMD_PERF</code> - Enable of internal performance statistic. It is switched off by default.</li>
<li><code>SIMD_SHARED</code> - Build as SHARED library. It is switched off by default.</li>
<li><code>SIMD_GET_VERSION</code> - Call scipt to get Simd Library version. It is switched on by default.</li>
<li><code>SIMD_SYNET</code> - Enable optimizations for Synet framework. It is switched on by default.</li>
<li><code>SIMD_SINT8_DEBUG</code> - Enable debug INT8 capabilities for Synet framework. It is switched on by default.</li>
<li><code>SIMD_HIDE</code> - Hide internal functions of Simd Library. It is switched off by default.</li>
<li><code>SIMD_TEST_FLAGS</code> - Addition compiler flags to build test framework.</li>
</ul>
<h1><a class="anchor" id="s4"></a>
The library using</h1>
<p >If you use the library from C code you must include: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Simd/SimdLib.h&quot;</span></div>
</div><!-- fragment --><p >And to use the library from C++ code you must include: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Simd/SimdLib.hpp&quot;</span></div>
</div><!-- fragment --><p >In order to use <a class="el" href="struct_simd_1_1_detection.html" title="The Detection structure provides object detection with using of HAAR and LBP cascade classifiers.">Simd::Detection</a> you must include: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Simd/SimdDetection.hpp&quot;</span></div>
</div><!-- fragment --><p >In order to use <a class="el" href="namespace_simd_1_1_neural.html" title="Contains Framework for learning of Convolutional Neural Network.">Simd::Neural</a> framework you must include: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Simd/SimdNeural.hpp&quot;</span></div>
</div><!-- fragment --><p >In order to use <a class="el" href="namespace_simd_1_1_motion.html" title="Contains Framework for motion detection.">Simd::Motion</a> framework you must include: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;Simd/SimdMotion.hpp&quot;</span></div>
</div><!-- fragment --><h1><a class="anchor" id="s5"></a>
Interaction with OpenCV:</h1>
<p >If you need use mutual conversion between Simd and OpenCV types you just have to define macro <code>SIMD_OPENCV_ENABLE</code> before including of Simd headers: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;opencv2/core/core.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#define SIMD_OPENCV_ENABLE</span></div>
<div class="line"><span class="preprocessor">#include &quot;Simd/SimdLib.hpp&quot;</span></div>
</div><!-- fragment --><p> And you can convert next types:</p><ul>
<li><code>cv::Point</code>, <code>cv::Size</code> &lt;--&gt; <a class="el" href="struct_simd_1_1_point.html" title="The Point structure defines the x- and y-coordinates of a point.">Simd::Point</a></li>
<li><code>cv::Rect</code> &lt;--&gt; <a class="el" href="struct_simd_1_1_rectangle.html" title="The Rectangle structure defines the positions of left, top, right and bottom sides of a rectangle.">Simd::Rectangle</a></li>
<li><code>cv::Mat</code> &lt;--&gt; <a class="el" href="struct_simd_1_1_view.html" title="The View structure provides storage and manipulation of images.">Simd::View</a></li>
</ul>
<h1><a class="anchor" id="s6"></a>
Test Framework</h1>
<p >The test suite is needed for testing of correctness of work of the library and also for its performance testing. There is a set of tests for every function from API of the library. There is an example of test application using: </p><div class="fragment"><div class="line">./Test -m=a -tt=1 -f=Sobel -ot=log.txt</div>
</div><!-- fragment --><p> Where next parameters were used:</p><ul>
<li><code>-m=a</code> - a auto checking mode which includes performance testing (only for library built in Release mode). In this case different implementations of each functions will be compared between themselves (for example a scalar implementation and implementations with using of different SIMD instructions such as SSE2, AVX2, and other). Also it can be <code>-m=c</code> (creation of test data for cross-platform testing), <code>-m=v</code> (cross-platform testing with using of early prepared test data) and <code>-m=s</code> (running of special tests).</li>
<li><code>-tt=1</code> - a number of test threads.</li>
<li><code>-fi=Sobel</code> - an include filter. In current case will be tested only functions which contain word <code>Sobel</code> in their names. If you miss this parameter then full testing will be performed. You can use several filters - function name has to satisfy at least one of them.</li>
<li><code>-ot=log.txt</code> - a file name with test report (in TEXT file format). The test's report also will be output to console.</li>
</ul>
<p >Also you can use parameters:</p><ul>
<li><code>-help</code> or <code>-?</code> in order to print help message.</li>
<li><code>-r=../..</code> to set project root directory.</li>
<li><code>-pa=1</code> to print alignment statistics.</li>
<li><code>-pi=1</code> to print internal statistics (Cmake parameter SIMD_PERF must be ON).</li>
<li><code>-c=512</code> a number of channels in test image for performance testing.</li>
<li><code>-h=1080</code> a height of test image for performance testing.</li>
<li><code>-w=1920</code> a width of test image for performance testing.</li>
<li><code>-oh=log.html</code> a file name with test report (in HTML file format).</li>
<li><code>-s=sample.avi</code> a video source (<a class="el" href="namespace_simd_1_1_motion.html" title="Contains Framework for motion detection.">Simd::Motion</a> test).</li>
<li><code>-o=output.avi</code> an annotated video output (<a class="el" href="namespace_simd_1_1_motion.html" title="Contains Framework for motion detection.">Simd::Motion</a> test).</li>
<li><code>-wt=1</code> a thread number used to parallelize algorithms.</li>
<li><code>-fe=Abs</code> an exlude filter to exclude some tests.</li>
<li><code>-mt=100</code> a minimal test execution time (in milliseconds).</li>
<li><code>-lc=1</code> to litter CPU cache between test runs.</li>
<li><code>-ri=city.jpg</code> a name of real image used in some tests. The image have to be placed in <code>./data/image</code> directory. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="footer">Generated for Simd Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div></div></div></div></div></div>
</td> </tr> </table>
</body>
</html>
